{
	"info": {
		"_postman_id": "aca-reca-api-collection",
		"name": "ACA RECA API",
		"description": "Complete API collection for ACA RECA Backend - A production-grade multi-tenant accounting SaaS backend for health professionals",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Register",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user@example.com\",\n    \"password\": \"password123\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"phone\": \"+1234567890\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"register"
							]
						},
						"description": "Register a new user with email and password"
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"access_token\", jsonData.access_token);",
									"    pm.collectionVariables.set(\"refresh_token\", jsonData.refresh_token);",
									"    pm.collectionVariables.set(\"user_id\", jsonData.user.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user@example.com\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"login"
							]
						},
						"description": "Login a user with email and password. Automatically saves access_token and refresh_token to collection variables."
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"access_token\", jsonData.access_token);",
									"    pm.collectionVariables.set(\"refresh_token\", jsonData.refresh_token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refresh_token\": \"{{refresh_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/refresh",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"refresh"
							]
						},
						"description": "Refresh access token using refresh token. Automatically updates access_token and refresh_token in collection variables."
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/logout",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"logout"
							]
						},
						"description": "Logout a user. Note: The handler expects session_id but route doesn't include it - may need to be fixed in code."
					},
					"response": []
				},
				{
					"name": "OAuth - Initiate (Google)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/oauth/google",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"oauth",
								"google"
							]
						},
						"description": "Initiate OAuth flow with Google. This will redirect to Google's OAuth consent screen."
					},
					"response": []
				},
				{
					"name": "OAuth - Initiate (Microsoft)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/oauth/microsoft",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"oauth",
								"microsoft"
							]
						},
						"description": "Initiate OAuth flow with Microsoft. This will redirect to Microsoft's OAuth consent screen."
					},
					"response": []
				},
				{
					"name": "OAuth - Callback (Google)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/oauth/google/callback?code=authorization_code&state=state_token",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"oauth",
								"google",
								"callback"
							],
							"query": [
								{
									"key": "code",
									"value": "authorization_code",
									"description": "Authorization code from OAuth provider"
								},
								{
									"key": "state",
									"value": "state_token",
									"description": "State token for CSRF protection (must match cookie)"
								}
							]
						},
						"description": "OAuth callback endpoint for Google. Called by OAuth provider after user authorization."
					},
					"response": []
				},
				{
					"name": "OAuth - Callback (Microsoft)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/oauth/microsoft/callback?code=authorization_code&state=state_token",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"oauth",
								"microsoft",
								"callback"
							],
							"query": [
								{
									"key": "code",
									"value": "authorization_code",
									"description": "Authorization code from OAuth provider"
								},
								{
									"key": "state",
									"value": "state_token",
									"description": "State token for CSRF protection (must match cookie)"
								}
							]
						},
						"description": "OAuth callback endpoint for Microsoft. Called by OAuth provider after user authorization."
					},
					"response": []
				}
			],
			"description": "Authentication endpoints for user registration, login, logout, and OAuth"
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Get Current User",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/users/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"users",
								"{{user_id}}"
							]
						},
						"description": "Get current user by user ID"
					},
					"response": []
				},
				{
					"name": "Update Current User",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"phone\": \"+1234567890\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/users/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"users",
								"{{user_id}}"
							]
						},
						"description": "Update current user by user ID"
					},
					"response": []
				},
				{
					"name": "Get Active Sessions",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/users/{{user_id}}/sessions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"users",
								"{{user_id}}",
								"sessions"
							]
						},
						"description": "Get all active sessions for the current user"
					},
					"response": []
				},
				{
					"name": "Revoke Session (DELETE)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/users/sessions/{{session_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"users",
								"sessions",
								"{{session_id}}"
							]
						},
						"description": "Revoke a specific session by session ID"
					},
					"response": []
				},
				{
					"name": "Revoke Session (POST)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/users/{{user_id}}/sessions/revoke",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"users",
								"{{user_id}}",
								"sessions",
								"revoke"
							]
						},
						"description": "Alternative endpoint to revoke a session (POST method)"
					},
					"response": []
				}
			],
			"description": "User management endpoints"
		},
		{
			"name": "Clinic",
			"item": [
				{
					"name": "Create Clinic",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Example Clinic\",\n    \"abn_number\": \"12345678901\",\n    \"address\": \"123 Main Street\",\n    \"city\": \"Sydney\",\n    \"state\": \"NSW\",\n    \"postcode\": \"2000\",\n    \"phone\": \"+61234567890\",\n    \"email\": \"clinic@example.com\",\n    \"website\": \"https://example.com\",\n    \"logo_url\": \"https://example.com/logo.png\",\n    \"description\": \"A sample clinic\",\n    \"is_active\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/clinic",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"clinic"
							]
						},
						"description": "Create a new clinic. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Get Clinic by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/clinic/{{clinic_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"clinic",
								"{{clinic_id}}"
							]
						},
						"description": "Retrieve a clinic by ID. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Update Clinic",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Updated Clinic Name\",\n    \"abn_number\": \"12345678901\",\n    \"address\": \"456 New Street\",\n    \"city\": \"Melbourne\",\n    \"state\": \"VIC\",\n    \"postcode\": \"3000\",\n    \"phone\": \"+61345678901\",\n    \"email\": \"updated@example.com\",\n    \"website\": \"https://updated.example.com\",\n    \"logo_url\": \"https://updated.example.com/logo.png\",\n    \"description\": \"An updated clinic description\",\n    \"is_active\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/clinic/{{clinic_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"clinic",
								"{{clinic_id}}"
							]
						},
						"description": "Update a clinic by ID. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Delete Clinic",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/clinic/{{clinic_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"clinic",
								"{{clinic_id}}"
							]
						},
						"description": "Delete a clinic by ID. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Get All Clinics",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/clinic",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"clinic"
							]
						},
						"description": "Retrieve all clinics. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Get Clinic by ABN Number",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/clinic/abn/12345678901",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"clinic",
								"abn",
								"12345678901"
							],
							"variable": [
								{
									"key": "abn_number",
									"value": "12345678901",
									"description": "ABN number to search for"
								}
							]
						},
						"description": "Retrieve a clinic by ABN number. Requires authentication."
					},
					"response": []
				}
			],
			"description": "Clinic management endpoints. All endpoints require authentication."
		},
		{
			"name": "User-Clinic",
			"item": [
				{
					"name": "Associate User with Clinic",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"userId\": \"{{user_id}}\",\n    \"clinicId\": \"{{clinic_id}}\",\n    \"role\": \"owner\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/user-clinic",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"user-clinic"
							]
						},
						"description": "Associate a user with a clinic. Creates a many-to-many relationship."
					},
					"response": []
				},
				{
					"name": "Get User's Clinics",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/user-clinic/user/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"user-clinic",
								"user",
								"{{user_id}}"
							]
						},
						"description": "Get all clinics associated with a user"
					},
					"response": []
				},
				{
					"name": "Get Clinic's Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/user-clinic/clinic/{{clinic_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"user-clinic",
								"clinic",
								"{{clinic_id}}"
							]
						},
						"description": "Get all users associated with a clinic"
					},
					"response": []
				},
				{
					"name": "Remove User from Clinic",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/user-clinic/{{user_clinic_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"user-clinic",
								"{{user_clinic_id}}"
							]
						},
						"description": "Remove a user-clinic association by association ID"
					},
					"response": []
				}
			],
			"description": "User-Clinic association endpoints. All endpoints require authentication."
		},
		{
			"name": "Expenses",
			"item": [
				{
					"name": "Create Expense Type",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"clinicId\": \"{{clinic_id}}\",\n    \"name\": \"Office Supplies\",\n    \"description\": \"Expenses for office supplies and stationery\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/expense/type",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"expense",
								"type"
							]
						},
						"description": "Create a new expense type"
					},
					"response": []
				},
				{
					"name": "Create Expense Category",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"clinicId\": \"{{clinic_id}}\",\n    \"name\": \"Utilities\",\n    \"description\": \"Monthly utility expenses\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/expense/category",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"expense",
								"category"
							]
						},
						"description": "Create a new expense category"
					},
					"response": []
				},
				{
					"name": "Create Expense Category Type",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"clinicId\": \"{{clinic_id}}\",\n    \"typeId\": \"{{expense_type_id}}\",\n    \"categoryId\": \"{{expense_category_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/expense/category-type",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"expense",
								"category-type"
							]
						},
						"description": "Create a new expense category type association"
					},
					"response": []
				},
				{
					"name": "Create Expense Entry",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"clinicId\": \"{{clinic_id}}\",\n    \"categoryId\": \"{{expense_category_id}}\",\n    \"typeId\": \"{{expense_type_id}}\",\n    \"amount\": 150.00,\n    \"gstRate\": 10.0,\n    \"isGSTInclusive\": true,\n    \"expenseDate\": \"2026-01-22T00:00:00Z\",\n    \"supplierName\": \"ABC Supplies\",\n    \"notes\": \"Monthly office supplies purchase\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/expense/entry",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"expense",
								"entry"
							]
						},
						"description": "Create a new expense entry"
					},
					"response": []
				},
				{
					"name": "Get Expense Type by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/expense/type/{{expense_type_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"expense",
								"type",
								"{{expense_type_id}}"
							]
						},
						"description": "Get an expense type by ID"
					},
					"response": []
				},
				{
					"name": "Get Expense Category by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/expense/category/{{expense_category_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"expense",
								"category",
								"{{expense_category_id}}"
							]
						},
						"description": "Get an expense category by ID"
					},
					"response": []
				},
				{
					"name": "Get Expense Category Type by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/expense/category-type/{{expense_category_type_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"expense",
								"category-type",
								"{{expense_category_type_id}}"
							]
						},
						"description": "Get an expense category type by ID"
					},
					"response": []
				},
				{
					"name": "Get Expense Entry by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/expense/entry/{{expense_entry_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"expense",
								"entry",
								"{{expense_entry_id}}"
							]
						},
						"description": "Get an expense entry by ID"
					},
					"response": []
				}
			],
			"description": "Expense management endpoints. All endpoints require authentication."
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "refresh_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "clinic_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "session_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_clinic_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "expense_type_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "expense_category_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "expense_category_type_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "expense_entry_id",
			"value": "",
			"type": "string"
		}
	]
}
